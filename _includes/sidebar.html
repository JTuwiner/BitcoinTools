<aside>
  <!-- <div id="bj-wrap">
    <a href="https://charts.bitbo.io/" target="_blank" class="b-unit chartsads" style="margin: 0 !important;"><div class="pic">
      <picture><img src="https://calendar.bitbo.io/assets/bitbo.jpg" alt="bitcoin jobs"></picture></div>
      <div class="r-wrap">
        <div class="text" style="font-size: 14px !important;">
          Get simple & clear Bitcoin charts and data with Bitbo Charts. 
        </div>
        <div class="site">
          charts.bitbo.io
        </div>
      </div>
    </a> 
  </div> -->
  
  <style>
      /* Basic sidebar header styles */
      .sidebar-header {
          display: block;
      }

  
      .toggle-button {
        display: none;
        background-color: black;
        color: #fff;
        padding: 10px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        margin: 0 auto;
        margin-top: 15px;
      }
  
      /* Media query to hide sidebar header on small screens and show the toggle button */
      @media (max-width: 768px) {
          .sidebar-header {
              display: none;
          }
  
          .toggle-button {
              display: block;
          }
      }
  </style>
  
  
  {% unless page.home %}
  <button id="toggleSidebar" class="toggle-button">Show Tools Categories</button>
  {% endunless %}
  
  <header class="sidebar-header {% if page.home %}homepage{% endif %}" id="sidebarHeader">
    
    <h2>Tools Categories</h2>
  
    <ul class="sidebar-list">
      {% assign catlist = site.pages | sort_natural: "title" %}
      {% for cat in catlist %}
      {% if cat.category %}
      <li>
        {% if cat.title == "Exchanges" %}
        <a title="{{ cat.title }}" class="sidebar-category" href="https://bitbo.io/buy/">
        {% elsif cat.custom_canonical %}
        <a title="{{ cat.title }}" class="sidebar-category" href="{{ cat.custom_canonical }}">
        {% else %}
        <a title="{{ cat.title }}" class="sidebar-category" href="/tools{{ cat.permalink }}">
        {% endif %}
          {% if cat.svgicon %}{{ cat.svgicon }}{% else %}<i class="fa-solid fa-{{ cat.icon }}"></i>{% endif %} {{ cat.title }}
        </a>
      </li>
      {% endif %}
      {% endfor %}
    </ul>
    
  </header>
  
  {% if page.sidebar_toc %}
  <div class="sidebar-toc" id="sidebar-toc">
    <h3>Table of Contents</h3>
    <ul class="sidebar-toc-list">
      {% for item in page.sidebar_toc %}
      <li><a href="#{{ item.id }}">{{ item.title }}</a></li>
      {% endfor %}
    </ul>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const sidebarToc = document.getElementById('sidebar-toc');
      const inlineToc = document.getElementById('inline-toc');
      if (!sidebarToc) {
        return;
      }
      
      function updateTocVisibility() {
        const isDesktop = window.innerWidth > 992;
        
        // Always show on desktop, always hide on mobile (CSS handles mobile hiding)
        if (isDesktop) {
          sidebarToc.style.display = 'block';
          sidebarToc.style.visibility = 'visible';
          // Hide inline TOC on desktop when sidebar TOC is visible
          if (inlineToc) {
            inlineToc.style.display = 'none';
          }
        } else {
          sidebarToc.style.display = 'none';
          // Show inline TOC on mobile
          if (inlineToc) {
            inlineToc.style.display = 'block';
            inlineToc.style.visibility = 'visible';
            inlineToc.style.opacity = '1';
          }
        }
      }
      
      window.addEventListener('resize', updateTocVisibility);
      updateTocVisibility();
    });
  </script>
  {% endif %}

    
</aside>
 
 <style>
   /* Make aside a flex column so TOC can stick properly */
   .main-page-content aside {
     display: flex;
     flex-direction: column;
     align-self: stretch;
   }
   
   .main-page-content aside header.sidebar-header {
     flex-shrink: 0;
   }
   
   .sidebar-toc {
     background: #1f2937;
     border: 1px solid #374151;
     border-radius: 10px;
     padding: 16px 20px;
     margin: 16px;
     position: sticky;
     top: 80px; /* Account for navbar height */
     display: block;
     visibility: visible;
     align-self: flex-start;
     max-height: calc(100vh - 100px);
     overflow-y: auto;
   }
   
   /* Hide on mobile/tablet */
   @media (max-width: 992px) {
     .sidebar-toc {
       display: none !important;
       visibility: hidden !important;
     }
   }
   
   /* Ensure visible on desktop */
   @media (min-width: 993px) {
     .sidebar-toc {
       display: block !important;
       visibility: visible !important;
     }
   }
   
   .sidebar-toc h3 {
     font-weight: 700;
     color: #f2a900;
     margin: 0 0 12px 0;
     font-size: 14px;
     text-transform: uppercase;
     letter-spacing: 0.5px;
   }
   
   .sidebar-toc-list {
     list-style: none;
     padding: 0;
     margin: 0;
   }
   
   .sidebar-toc-list li {
     margin-bottom: 8px;
   }
   
   .sidebar-toc-list li a {
     color: #d1d5db !important;
     text-decoration: none;
     font-size: 14px;
     transition: color 0.15s;
     display: block;
     padding: 2px 0;
   }
   
   .sidebar-toc-list li a:hover {
     color: #f2a900 !important;
     text-decoration: underline;
   }

   /* Inline TOC transition - prevents content jump */
   #inline-toc {
     transition: opacity 0.2s ease, visibility 0.2s ease;
   }

   .sidebar-list {
     list-style: none;
     list-style-type: none;
     padding: 0;
     margin-top: 15px;
   }
   .sidebar-list li {
     margin-bottom: 1px;
   }
   
   .sidebar-list li a {
     color: #C2C2C2 !important;
     width: 100%;
     display: block;
     padding: 1px 3px 4px 0px;
     border-radius: 5px;
     font-size: 16px;
   }
   
   .sidebar-list li a:hover {
     text-decoration: none !important;
     background: black;
     color: white;
   }
   
   .sidebar-list li svg {
     margin-right: 3px;
     border-radius: .375rem;
     border: 0px !important;
     width: 26px;
     height: 26px;
     text-align: center;
     padding: 6px;
     font-size: 15px;
     color: #f2a900;
   }
   
   .sidebar-list li i {
     margin-right: 3px;
     border-radius: .375rem;
     /* border: 1px solid #3F3F3F; */
     width: 28px;
     height: 25px;
     text-align: center;
     padding: 6px;
     font-size: 13px;
     color: #f2a900
   }
   
 </style>
 
 <script>
document.addEventListener('DOMContentLoaded', function () {
   const sidebar = document.getElementById('sidebarHeader');
   const toggleButton = document.getElementById('toggleSidebar');
 
   // Set the initial sidebar visibility based on homepage and mobile screen
   if (sidebar.classList.contains('homepage')) {
     sidebar.style.display = 'block';
   } else if (window.innerWidth <= 768) {
     sidebar.style.display = 'none';
   }
 
   // Toggle button click event listener
   if (toggleButton) {
     toggleButton.addEventListener('click', function () {
       // Check the exact current display state
       if (sidebar.style.display === 'block' || sidebar.style.display === '') {
         sidebar.style.display = 'none';
         this.textContent = 'Show Tools Categories';
       } else {
         sidebar.style.display = 'block';
         this.textContent = 'Hide Tools Categories';
       }
     });
   }
 });

 </script>
